@model Payrollfix_poc.Models.Employee
@{
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-4">
	<div class="row">
		<!-- Navbar (Partial View) -->
		@await Html.PartialAsync("_NavbarPartial")

		<!-- Employee Details Section -->
		<div class="col-md-10">
			<form asp-action="Details" method="get" class="form-inline mb-4">
				<div class="form-group">
					<input type="text" name="name" class="form-control mr-2" placeholder="Enter Employee Name" value="@ViewBag.SearchTerm">
					<button type="submit" class="btn btn-primary">Search</button>
				</div>
			</form>

			<!-- Show error message if no employee is found -->
			@if (!string.IsNullOrEmpty(ViewBag.ErrorMessage))
			{
				<div class="alert alert-danger">
					@ViewBag.ErrorMessage
				</div>
			}

			<!-- Display Employee Data only if an employee is found -->
			@if (Model != null)
			{
				<div class="card shadow-lg">
					<div class="row no-gutters">
						<div class="col-md-3 text-center bg-light">
							<img src="~/images/avatar.png" class="rounded-circle mt-3" alt="Employee Image" style="width:150px;">
							<h5 class="card-title mt-2">@Model.FirstName @Model.LastName</h5>
							<p class="text-muted">
								@if (Model.Position != null)
								{
									@Model.Position.PositionDescription
								}
								else
								{
									<span>Not Assigned</span>
								}
							</p>
							<p class="text-muted">
								@if (Model.Department != null)
								{
									@Model.Department.DeptDescription
								}
								else
								{
									<span>Department Not Assigned</span>
								}
							</p>
						</div>
						<div class="col-md-9">
							<div class="card-body">
								<h5 class="card-title">Basic Information</h5>
								<div class="row">
									<div class="col-md-6">
										<p><strong>Email:</strong> @Model.Email</p>
										<p><strong>Phone:</strong> @Model.Phone_no</p>
										<p><strong>Address:</strong> @Model.Address</p>
										<p><strong>Date of Birth:</strong> @Model.DOB.ToShortDateString()</p>
									</div>
									<div class="col-md-6">
										<p><strong>Employee ID:</strong> @Model.EmployeeId</p>
										<p><strong>Join Date:</strong> @Model.JoinDate.ToShortDateString()</p>
										<p><strong>Gender:</strong> @Model.Gender</p>
									</div>
								</div>

								<h5 class="card-title mt-4">Contact Information</h5>
								<div class="row">
									<div class="col-md-6">
										<p><strong>Email Address:</strong> @Model.Email</p>
										<p><strong>Phone Number:</strong> @Model.Phone_no</p>
										<p>
											<strong>Website:</strong>
											<span>Website Not Available</span>
										</p>
									</div>
									<div class="col-md-6">
										<p><strong>Postal Address:</strong> @Model.Address</p>
										<p><strong>City:</strong> Hyderabad</p>
										<p><strong>Zip Code:</strong> 500039</p>
									</div>
								</div>

								<h5 class="card-title mt-4">Applied Leaves</h5>
								<table class="table table-bordered">
									<thead>
										<tr>
											<th>Leave Type</th>
											<th>Duration</th>
											<th>No. of Days</th>
											<th>Status</th>
										</tr>
									</thead>
									<tbody>
										<!-- Loop through the leave data -->
										<tr>
											<td>Annual</td>
											<td>03-Dec-2022 to 05-Dec-2023</td>
											<td>02 Days</td>
											<td><span class="badge badge-success">Approved</span></td>
										</tr>
										<tr>
											<td>Casual</td>
											<td>03-Dec-2023</td>
											<td>01 Day</td>
											<td><span class="badge badge-danger">Denied</span></td>
										</tr>
										<tr>
											<td>Vacation</td>
											<td>03-Dec-2022 to 05-Dec-2023</td>
											<td>02 Days</td>
											<td><span class="badge badge-warning">Pending</span></td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			}
			else
			{
				<p>Search for Employee</p>
			}
		</div>
	</div>
</div>

<!-- Custom CSS to match color scheme -->
<style>
	.card {
		border: none;
		background: #f8f9fa;
	}

	.card-body h5 {
		color: #007bff;
		font-weight: 600;
	}

	.badge-success {
		background-color: #28a745;
	}

	.badge-danger {
		background-color: #dc3545;
	}

	.badge-warning {
		background-color: #ffc107;
	}
</style>
